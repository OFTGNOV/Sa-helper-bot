<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SA Helper Chatbot - Test Page</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="wp-content/plugins/sa-helper-chatbot/assets/css/sa-helper-chatbot-public.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-content {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            border-left: 4px solid #007cba;
        }
        .feature-title {
            font-weight: bold;
            color: #007cba;
            margin-bottom: 10px;
        }
        .test-instructions {
            background: #e7f3ff;
            border: 1px solid #b8d4f0;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-active { background-color: #46b450; }
        .status-inactive { background-color: #dc3232; }
    </style>
</head>
<body>
    <div class="test-content">
        <div class="test-header">
            <h1>ðŸ¤– SA Helper Chatbot</h1>
            <p>Enhanced WordPress AI Chatbot with Gemini Integration</p>
            <div style="margin-top: 15px;">
                <span class="status-indicator status-active"></span>
                <strong>Plugin Status:</strong> Active & Ready for Testing
            </div>
        </div>

        <div class="test-instructions">
            <h3>ðŸ§ª Testing Instructions</h3>
            <ol>
                <li><strong>Click the "Need Help?" button</strong> in the bottom-right corner to open the chatbot</li>
                <li><strong>Test conversation persistence:</strong> Send a message, refresh the page, and check if conversation history loads</li>
                <li><strong>Test page content extraction:</strong> The chatbot should be aware of this page's content</li>
                <li><strong>Test keyboard navigation:</strong> Use Tab, Enter, and Escape keys</li>
                <li><strong>Test rate limiting:</strong> Try sending multiple messages quickly</li>
                <li><strong>Test feedback system:</strong> Use thumbs up/down after receiving responses</li>
            </ol>
        </div>

        <div class="feature-list">
            <div class="feature-card">
                <div class="feature-title">ðŸ§  Enhanced AI Integration</div>
                <ul>
                    <li>Gemini API with intelligent fallback</li>
                    <li>Page content prioritization</li>
                    <li>Session management</li>
                    <li>Temperature & token controls</li>
                </ul>
            </div>

            <div class="feature-card">
                <div class="feature-title">ðŸ’¾ Conversation Persistence</div>
                <ul>
                    <li>localStorage conversation history</li>
                    <li>Cross-page navigation support</li>
                    <li>Session statistics tracking</li>
                    <li>History management functions</li>
                </ul>
            </div>

            <div class="feature-card">
                <div class="feature-title">ðŸ“š Knowledge Base Management</div>
                <ul>
                    <li>Company information section</li>
                    <li>Website navigation tips</li>
                    <li>Recent news & updates</li>
                    <li>FAQ section with Q&A</li>
                </ul>
            </div>

            <div class="feature-card">
                <div class="feature-title">â™¿ Accessibility Features</div>
                <ul>
                    <li>ARIA labels and roles</li>
                    <li>Keyboard navigation support</li>
                    <li>Focus management</li>
                    <li>Screen reader compatibility</li>
                </ul>
            </div>

            <div class="feature-card">
                <div class="feature-title">ðŸ“Š Analytics & Monitoring</div>
                <ul>
                    <li>Dashboard analytics widget</li>
                    <li>Feedback tracking system</li>
                    <li>API status monitoring</li>
                    <li>Performance metrics</li>
                </ul>
            </div>

            <div class="feature-card">
                <div class="feature-title">ðŸŽ¨ Modern UI/UX</div>
                <ul>
                    <li>Gradient design themes</li>
                    <li>Dark mode support</li>
                    <li>Mobile responsive layout</li>
                    <li>Smooth animations</li>
                </ul>
            </div>
        </div>

        <div style="margin-top: 40px; padding: 20px; background: #f0f8ff; border-radius: 6px;">
            <h3>ðŸ“‹ Test Scenarios</h3>
            <p><strong>Try asking these questions to test different functionalities:</strong></p>
            <ul>
                <li>"What is this company about?" (Knowledge base test)</li>
                <li>"How do I navigate this website?" (Navigation help test)</li>
                <li>"What's new with your company?" (Recent news test)</li>
                <li>"Do you have frequently asked questions?" (FAQ test)</li>
                <li>"What can you see on this page?" (Page content extraction test)</li>
                <li>"Hello, can you help me?" (General conversation test)</li>
            </ul>
        </div>

        <div style="margin-top: 30px; text-align: center; color: #666;">
            <p><em>This is a test environment for the SA Helper Chatbot WordPress plugin.</em></p>
            <p><strong>Version:</strong> 2.0.0 | <strong>Last Updated:</strong> June 2025</p>
        </div>
    </div>

    <!-- Chatbot HTML Structure (simulating WordPress template) -->
    <div class="sa-helper-chatbot-container">
        <div class="sa-helper-chatbot-button" role="button" aria-label="Open chat support" tabindex="0">
            <span class="sa-helper-chatbot-icon">Need Help?</span>
        </div>
        
        <div class="sa-helper-chatbot-popup" role="dialog" aria-labelledby="chatbot-title" aria-hidden="true">
            <div class="sa-helper-chatbot-header">
                <div class="sa-helper-chatbot-title" id="chatbot-title">Helper Bot</div>
                <div class="sa-helper-chatbot-close" role="button" aria-label="Close chat" tabindex="0">&times;</div>
            </div>
            
            <div class="sa-helper-chatbot-messages" role="log" aria-live="polite" aria-label="Chat messages">
                <div class="sa-helper-chatbot-message bot welcome-message">
                    Hi there! How can I help you today? I can provide information about our company, help you navigate the website, and answer your questions.
                </div>
            </div>
            
            <div class="sa-helper-chatbot-input-area">
                <input type="text" class="sa-helper-chatbot-input" placeholder="Type your message..." aria-label="Type your message" />
                <button class="sa-helper-chatbot-send" type="button" aria-label="Send message">
                    <span>Send</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Simulate WordPress AJAX object -->
    <script>
        // Mock WordPress AJAX functionality for testing
        window.saHelperChatbot = {
            ajax_url: 'wp-admin/admin-ajax.php',
            nonce: 'test-nonce-12345'
        };

        // Mock AJAX responses for testing
        const mockResponses = {
            "what is this company about": "We are SA Helper, a technology company focused on providing innovative solutions and excellent customer service. We specialize in AI-powered tools and WordPress development.",
            "how do i navigate this website": "You can use our main navigation menu at the top of the page. Key sections include: Home, Services, About Us, Contact, and Blog. All pages are accessible via the header menu.",
            "what's new": "We recently launched our enhanced AI chatbot with Gemini integration! We've also updated our website with a modern design and improved user experience.",
            "faq": "Here are some frequently asked questions:\n\nQ: What services do you offer?\nA: We provide AI solutions, WordPress development, and consulting services.\n\nQ: How can I contact support?\nA: You can reach us via the contact form or email support@sahelper.com.",
            "hello": "Hello! I'm here to help you with any questions about our company, services, or website navigation. What would you like to know?",
            "default": "Thank you for your question! This is a test response. In a live environment, I would provide detailed information based on our knowledge base and current page content."
        };

        // Override jQuery AJAX for testing
        $(document).ready(function() {
            // Store original ajax function
            const originalAjax = $.ajax;
            
            // Mock AJAX function
            $.ajax = function(options) {
                console.log('Mock AJAX called:', options);
                
                if (options.data && options.data.action === 'sa_helper_chatbot_message') {
                    const message = options.data.message.toLowerCase();
                    let response = mockResponses.default;
                    
                    // Find matching response
                    for (const [key, value] of Object.entries(mockResponses)) {
                        if (message.includes(key)) {
                            response = value;
                            break;
                        }
                    }
                    
                    // Simulate network delay
                    setTimeout(() => {
                        options.success({
                            success: true,
                            data: {
                                response: response,
                                session_stats: {
                                    session_id: 'test-session-' + Date.now(),
                                    message_count: Math.floor(Math.random() * 10) + 1,
                                    started_at: Date.now() - 300000
                                },
                                timestamp: Date.now()
                            }
                        });
                    }, 500 + Math.random() * 1000); // Random delay 0.5-1.5s
                    
                } else if (options.data && options.data.action === 'sa_helper_chatbot_feedback') {
                    // Mock feedback response
                    setTimeout(() => {
                        options.success({
                            success: true,
                            data: 'Feedback recorded'
                        });
                    }, 200);
                } else {
                    // Call original AJAX for other requests
                    return originalAjax.call(this, options);
                }
            };
        });
    </script>

    <!-- Load the actual chatbot JavaScript -->
    <script src="wp-content/plugins/sa-helper-chatbot/assets/js/sa-helper-chatbot-public.js"></script>
</body>
</html>